<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#d97757">
    <meta name="description" content="Claude Design Test - A health-conscious AI interface prototype">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Claude Design Test">

    <title>Claude Design Test</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ’š</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Lora:wght@400;500;600&display=swap" rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --dark: #141413;
            --light: #faf9f5;
            --mid-gray: #b0aea5;
            --light-gray: #e8e6dc;
            --orange: #d97757;
            --blue: #6a9bcc;
            --green: #788c5d;
        }

        body {
            font-family: 'Lora', Georgia, serif;
            background-color: var(--light);
            color: var(--dark);
            max-width: 430px;
            margin: 0 auto;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            -webkit-font-smoothing: antialiased;
            position: relative;
        }

        body > *:not(.particles) {
            position: relative;
            z-index: 1;
        }

        h1, h2, h3 {
            font-family: 'Poppins', Arial, sans-serif;
        }

        /* Theme Toggle */
        .theme-toggle-container {
            background-color: white;
            padding: 16px 20px;
            border-bottom: 2px solid var(--light-gray);
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .theme-toggle-label {
            font-family: 'Poppins', Arial, sans-serif;
            font-size: 11px;
            color: var(--mid-gray);
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .theme-switch {
            position: relative;
            display: inline-block;
            width: 100%;
            height: 48px;
        }

        .theme-options {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--light-gray);
            transition: all .3s ease;
            border-radius: 24px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            align-items: center;
            padding: 4px;
            gap: 4px;
        }

        .theme-option {
            font-family: 'Poppins', Arial, sans-serif;
            font-size: 11px;
            font-weight: 600;
            z-index: 2;
            text-align: center;
            padding: 0 6px;
            transition: all 0.3s ease;
            color: var(--mid-gray);
            line-height: 1.3;
            pointer-events: none;
        }

        .theme-option-btn {
            font-family: 'Poppins', Arial, sans-serif;
            font-size: 11px;
            font-weight: 600;
            z-index: 2;
            text-align: center;
            padding: 10px 6px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            color: var(--mid-gray);
            line-height: 1.3;
            cursor: pointer;
            border: none;
            background: transparent;
            border-radius: 18px;
        }

        .theme-option-btn.active {
            background-color: var(--orange);
            color: white;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(217, 119, 87, 0.4);
        }

        /* Header Styles */
        .header {
            padding: 14px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
        }

        body.theme-original .header {
            background-color: var(--dark);
            color: var(--light);
            border-bottom: 1px solid rgba(250, 249, 245, 0.1);
        }

        body.theme-modern .header {
            background-color: var(--light);
            color: var(--dark);
            border-bottom: 1px solid var(--light-gray);
        }

        /* Mobile Theme - Based on Claude Mobile App */
        body.theme-mobile {
            background-color: #f5f4f0;
        }

        body.theme-mobile .header {
            background-color: #f5f4f0;
            color: var(--dark);
            border-bottom: none;
            padding: 20px 20px 16px;
        }

        body.theme-mobile .logo {
            font-size: 22px;
            font-weight: 700;
        }

        body.theme-mobile .context-badge {
            background-color: transparent;
            border: none;
            color: var(--mid-gray);
            padding: 0;
            font-size: 13px;
        }

        body.theme-mobile .mode-selector {
            background-color: #f5f4f0;
            border-bottom: none;
            padding: 12px 20px;
        }

        body.theme-mobile .mode-btn {
            border: 1px solid #d4d2cc;
            background-color: white;
            color: var(--dark);
            border-radius: 20px;
            padding: 10px 18px;
        }

        body.theme-mobile .mode-btn.active {
            background-color: #c96a49;
            color: white;
            border-color: #c96a49;
        }

        body.theme-mobile .chat-container {
            background-color: #f5f4f0;
        }

        body.theme-mobile .message.user .message-bubble {
            background-color: #e8e7e3;
            color: var(--dark);
            border-radius: 20px;
            box-shadow: none;
        }

        body.theme-mobile .message.assistant .message-bubble {
            background-color: white;
            color: var(--dark);
            border: none;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
            border-radius: 20px;
        }

        body.theme-mobile .input-wrapper {
            background-color: #f5f4f0;
            border-top: none;
            padding: 12px 20px 20px;
        }

        body.theme-mobile .input-container {
            background-color: white;
            border: 1px solid #d4d2cc;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
            border-radius: 26px;
            padding: 12px 16px;
        }

        body.theme-mobile .context-panel {
            background-color: rgba(0, 0, 0, 0.03);
            border: none;
            border-radius: 16px;
        }

        body.theme-mobile .session-bar {
            background-color: #e8e7e3;
        }

        body.theme-mobile .wellness-prompt {
            background: linear-gradient(135deg, #c96a49, #e89c7f);
        }

        /* Mobile-2 Theme - Claude Mobile with Figma Design Tokens */
        body.theme-mobile-2 {
            background-color: #FAFAF7; /* Figma Ivory Light */
        }

        body.theme-mobile-2 .header {
            background-color: #FAFAF7; /* Figma Ivory Light */
            color: #191919; /* Figma Slate Dark */
            border-bottom: 1px solid #E5E4DF; /* Figma Ivory Dark */
            padding: 16px 20px;
        }

        body.theme-mobile-2 .logo {
            font-size: 16px;
            font-weight: 600;
            color: #191919; /* Figma Slate Dark */
        }

        body.theme-mobile-2 .context-badge {
            background-color: transparent;
            border: none;
            color: #666663; /* Figma Cloud Dark */
            padding: 0;
            font-size: 13px;
        }

        body.theme-mobile-2 .mode-selector {
            background-color: #FAFAF7; /* Figma Ivory Light */
            border-bottom: 1px solid #E5E4DF; /* Figma Ivory Dark */
            padding: 12px 20px;
        }

        body.theme-mobile-2 .mode-btn {
            border: 1px solid #BFBFBA; /* Figma Cloud Light */
            background-color: #FFFFFF; /* Figma White */
            color: #191919; /* Figma Slate Dark */
            border-radius: 20px;
            padding: 10px 18px;
        }

        body.theme-mobile-2 .mode-btn.active {
            background-color: #D97757; /* Figma UI Orange */
            color: #FFFFFF; /* Figma White */
            border-color: #D97757; /* Figma UI Orange */
        }

        body.theme-mobile-2 .chat-container {
            background-color: #FAFAF7; /* Figma Ivory Light */
        }

        body.theme-mobile-2 .message.user .message-bubble {
            background-color: #E5E4DF; /* Figma Ivory Dark */
            color: #191919; /* Figma Slate Dark */
            border-radius: 20px;
            box-shadow: none;
        }

        body.theme-mobile-2 .message.assistant .message-bubble {
            background-color: #FFFFFF; /* Figma White */
            color: #191919; /* Figma Slate Dark */
            border: 1px solid #F0F0EB; /* Figma Ivory Medium */
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
            border-radius: 20px;
        }

        body.theme-mobile-2 .input-wrapper {
            background-color: #FAFAF7; /* Figma Ivory Light */
            border-top: 1px solid #E5E4DF; /* Figma Ivory Dark */
            padding: 12px 20px 20px;
        }

        body.theme-mobile-2 .input-container {
            background-color: #FFFFFF; /* Figma White */
            border: 1px solid #BFBFBA; /* Figma Cloud Light */
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
            border-radius: 26px;
            padding: 12px 16px;
        }

        body.theme-mobile-2 .context-panel {
            background-color: #F0F0EB; /* Figma Ivory Medium */
            border: 1px solid #E5E4DF; /* Figma Ivory Dark */
            border-radius: 16px;
        }

        body.theme-mobile-2 .session-bar {
            background-color: #E5E4DF; /* Figma Ivory Dark */
        }

        body.theme-mobile-2 .wellness-prompt {
            background: linear-gradient(135deg, #D97757, #CC785C); /* Figma UI Orange to Book Cloth */
        }

        /* Mobile-2 Header Layout */
        body.theme-mobile-2 .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        body.theme-mobile-2 .header-left {
            flex: 0;
        }

        body.theme-mobile-2 .logo {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        body.theme-mobile-2 .header-icon-btn {
            background: none;
            border: none;
            padding: 8px;
            cursor: pointer;
            color: #191919;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            transition: background-color 0.2s ease;
        }

        body.theme-mobile-2 .header-icon-btn:hover {
            background-color: #F0F0EB;
        }

        body.theme-mobile-2 .model-dropdown {
            display: flex;
            align-items: center;
            gap: 4px;
            background: none;
            border: none;
            font-size: 16px;
            font-weight: 600;
            color: #191919;
            cursor: pointer;
            padding: 6px 10px;
            border-radius: 8px;
            transition: background-color 0.2s ease;
        }

        body.theme-mobile-2 .model-dropdown:hover {
            background-color: #F0F0EB;
        }

        body.theme-mobile-2 .model-dropdown svg {
            color: #D97757; /* Figma UI Orange for Claude icon */
        }

        /* Mobile-2 Message Actions */
        body.theme-mobile-2 .message-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #F0F0EB;
        }

        body.theme-mobile-2 .action-btn {
            background: none;
            border: none;
            color: #666663;
            font-size: 13px;
            padding: 6px 10px;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        body.theme-mobile-2 .action-btn:hover {
            background-color: #F0F0EB;
            color: #191919;
        }

        body.theme-mobile-2 .action-btn svg {
            width: 14px;
            height: 14px;
        }

        /* Mobile-2 Figma Button Styles */
        body.theme-mobile-2 .attach-btn {
            background: none;
            border: none;
            color: #666663;
            padding: 8px;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        body.theme-mobile-2 .attach-btn:hover {
            background-color: #F0F0EB;
            color: #191919;
        }

        body.theme-mobile-2 .wellness-btn {
            background-color: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 18px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        body.theme-mobile-2 .wellness-btn:hover {
            background-color: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.4);
        }

        body.theme-mobile-2 .wellness-btn.primary {
            background-color: white;
            color: #D97757;
            border-color: white;
        }

        body.theme-mobile-2 .wellness-btn.primary:hover {
            background-color: #F0F0EB;
        }

        /* Hide context badge and project badge in Mobile-2 */
        body.theme-mobile-2 .context-badge {
            display: none;
        }

        body.theme-mobile-2 .project-badge {
            display: none;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo {
            font-family: 'Poppins', Arial, sans-serif;
            font-size: 20px;
            font-weight: 700;
            color: var(--orange);
            animation: logoAlive 3s ease-in-out infinite;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            cursor: pointer;
        }

        .logo:hover {
            transform: scale(1.2) rotate(5deg);
            filter: brightness(1.4) drop-shadow(0 0 12px rgba(217, 119, 87, 0.5));
        }

        @keyframes logoAlive {
            0%, 100% {
                filter: brightness(1) drop-shadow(0 0 0px rgba(217, 119, 87, 0));
                transform: scale(1);
            }
            50% {
                filter: brightness(1.2) drop-shadow(0 0 10px rgba(217, 119, 87, 0.4));
                transform: scale(1.06);
            }
        }

        .context-badge {
            padding: 5px 12px;
            border-radius: 14px;
            font-size: 12px;
            font-family: 'Poppins', Arial, sans-serif;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            animation: gentlePulse 3s ease-in-out infinite;
            cursor: pointer;
        }

        .context-badge:hover {
            transform: scale(1.05) translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        @keyframes gentlePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        body.theme-original .context-badge {
            background-color: rgba(250, 249, 245, 0.1);
            border: 1px solid rgba(250, 249, 245, 0.2);
            color: var(--light);
        }

        body.theme-modern .context-badge {
            background-color: rgba(120, 140, 93, 0.15);
            border: 1px solid rgba(120, 140, 93, 0.3);
            color: var(--green);
        }

        .context-icon {
            width: 7px;
            height: 7px;
            border-radius: 50%;
            background-color: var(--green);
            animation: pulse 2s ease-in-out infinite;
            box-shadow: 0 0 0 0 rgba(120, 140, 93, 0.7);
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(120, 140, 93, 0.7);
            }
            25% {
                opacity: 0.8;
                transform: scale(1.3);
                box-shadow: 0 0 0 4px rgba(120, 140, 93, 0.3);
            }
            50% {
                opacity: 0.5;
                transform: scale(1.5);
                box-shadow: 0 0 0 8px rgba(120, 140, 93, 0);
            }
            75% {
                opacity: 0.8;
                transform: scale(1.3);
                box-shadow: 0 0 0 4px rgba(120, 140, 93, 0.3);
            }
        }

        .session-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        body.theme-original .session-indicator {
            color: var(--mid-gray);
        }

        body.theme-modern .session-indicator {
            color: var(--mid-gray);
        }

        .session-bar {
            width: 40px;
            height: 3px;
            border-radius: 2px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        body.theme-original .session-bar {
            background-color: rgba(250, 249, 245, 0.2);
        }

        body.theme-modern .session-bar {
            background-color: var(--light-gray);
        }

        .session-progress {
            height: 100%;
            background-color: var(--orange);
            width: 30%;
            transition: width 1s ease;
        }

        /* Mode Selector */
        .mode-selector {
            padding: 12px 20px;
            display: flex;
            gap: 10px;
            align-items: center;
            transition: all 0.3s ease;
        }

        body.theme-original .mode-selector {
            background-color: var(--light-gray);
            border-bottom: 1px solid var(--mid-gray);
        }

        body.theme-modern .mode-selector {
            background-color: var(--light);
            border-bottom: 1px solid var(--light-gray);
        }

        .mode-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 10px 16px;
            border-radius: 10px;
            font-family: 'Poppins', Arial, sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            position: relative;
        }

        .mode-btn:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: 0 8px 20px rgba(20, 20, 19, 0.15);
        }

        .mode-btn:active {
            transform: translateY(-1px) scale(1.02);
        }

        .mode-btn.active {
            animation: activeGlow 2s ease-in-out infinite;
        }

        @keyframes activeGlow {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(217, 119, 87, 0);
            }
            50% {
                box-shadow: 0 0 20px 5px rgba(217, 119, 87, 0.3);
            }
        }

        body.theme-original .mode-btn {
            border: 1px solid var(--mid-gray);
            background-color: var(--light);
            color: var(--dark);
        }

        body.theme-original .mode-btn.active {
            background-color: var(--dark);
            color: var(--light);
            border-color: var(--dark);
        }

        body.theme-modern .mode-btn {
            border: 1px solid var(--light-gray);
            background-color: white;
            color: var(--dark);
        }

        body.theme-modern .mode-btn:hover {
            border-color: var(--mid-gray);
            background-color: var(--light);
        }

        body.theme-modern .mode-btn.active {
            background-color: var(--orange);
            color: white;
            border-color: var(--orange);
        }

        /* Chat Container */
        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            background-color: var(--light);
        }

        .chat-container::-webkit-scrollbar {
            width: 6px;
        }

        .chat-container::-webkit-scrollbar-track {
            background: var(--light-gray);
        }

        .chat-container::-webkit-scrollbar-thumb {
            background: var(--mid-gray);
            border-radius: 3px;
        }

        /* Messages */
        .message {
            display: flex;
            flex-direction: column;
            gap: 8px;
            animation: fadeInSlide 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .message:nth-child(1) { animation-delay: 0s; }
        .message:nth-child(2) { animation-delay: 0.1s; }
        .message:nth-child(3) { animation-delay: 0.2s; }
        .message:nth-child(4) { animation-delay: 0.3s; }
        .message:nth-child(5) { animation-delay: 0.4s; }

        @keyframes fadeInSlide {
            from {
                opacity: 0;
                transform: translateY(12px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            align-items: flex-end;
        }

        .message-bubble {
            max-width: 85%;
            padding: 14px 16px;
            border-radius: 18px;
            font-size: 15px;
            line-height: 1.6;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .message-bubble:hover {
            transform: translateY(-6px) scale(1.02);
            box-shadow: 0 12px 32px rgba(20, 20, 19, 0.15);
        }

        .message-bubble:active {
            transform: translateY(-2px) scale(0.99);
        }

        body.theme-original .message.user .message-bubble {
            background-color: var(--dark);
            color: var(--light);
        }

        body.theme-modern .message.user .message-bubble {
            background-color: var(--orange);
            color: white;
        }

        body.theme-original .message.assistant .message-bubble {
            background-color: var(--light-gray);
            color: var(--dark);
            border: 1px solid var(--mid-gray);
        }

        body.theme-modern .message.assistant .message-bubble {
            background-color: white;
            color: var(--dark);
            border: 1px solid var(--light-gray);
            box-shadow: 0 1px 3px rgba(20, 20, 19, 0.05);
        }

        /* Breathing Space */
        .breathing-space {
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.4;
        }

        .breathing-dots {
            display: flex;
            gap: 4px;
        }

        .breathing-dots span {
            width: 4px;
            height: 4px;
            background-color: var(--mid-gray);
            border-radius: 50%;
            animation: breathe 2.5s ease-in-out infinite;
        }

        .breathing-dots span:nth-child(2) {
            animation-delay: 0.4s;
        }

        .breathing-dots span:nth-child(3) {
            animation-delay: 0.8s;
        }

        @keyframes breathe {
            0% {
                opacity: 0.3;
                transform: scale(0.6) translateY(0);
            }
            25% {
                opacity: 0.7;
                transform: scale(1.1) translateY(-4px);
            }
            50% {
                opacity: 1;
                transform: scale(1.5) translateY(-8px);
            }
            75% {
                opacity: 0.7;
                transform: scale(1.1) translateY(-4px);
            }
            100% {
                opacity: 0.3;
                transform: scale(0.6) translateY(0);
            }
        }

        /* Context Panel */
        .context-panel {
            background-color: rgba(106, 155, 204, 0.1);
            border: 1px solid var(--blue);
            border-radius: 12px;
            padding: 12px 14px;
            font-size: 13px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .context-row {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .context-label {
            font-family: 'Poppins', Arial, sans-serif;
            font-weight: 600;
            color: var(--blue);
            min-width: 55px;
        }

        .context-value {
            color: var(--dark);
        }

        .mood-badge {
            display: inline-block;
            padding: 4px 10px;
            background-color: var(--green);
            color: var(--light);
            border-radius: 12px;
            font-size: 11px;
            font-family: 'Poppins', Arial, sans-serif;
            font-weight: 500;
        }

        /* Expandable */
        .expandable {
            margin-top: 12px;
        }

        .expand-trigger {
            display: flex;
            align-items: center;
            gap: 6px;
            color: var(--orange);
            font-size: 13px;
            font-family: 'Poppins', Arial, sans-serif;
            cursor: pointer;
            padding: 8px 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            user-select: none;
        }

        .expand-trigger:hover {
            gap: 8px;
            transform: translateX(2px);
        }

        .expand-icon {
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: inline-block;
        }

        .expand-trigger:hover .expand-icon {
            transform: scale(1.2);
        }

        .expand-icon.expanded {
            transform: rotate(90deg);
        }

        .expanded-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
        }

        .expanded-content.show {
            max-height: 600px;
            padding: 12px;
            background-color: rgba(217, 119, 87, 0.05);
            border-radius: 12px;
            margin-top: 8px;
        }

        .expanded-content ul, .expanded-content ol {
            margin-left: 20px;
            margin-top: 8px;
            line-height: 1.6;
        }

        .expanded-content li {
            margin-bottom: 6px;
        }

        /* Wellness Prompt */
        .wellness-prompt {
            background: linear-gradient(135deg, var(--blue), var(--green));
            color: var(--light);
            padding: 16px;
            border-radius: 12px;
            text-align: center;
            font-size: 14px;
            animation: gentleFloat 4s ease-in-out infinite;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .wellness-prompt:hover {
            transform: translateY(-6px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
        }

        @keyframes gentleFloat {
            0%, 100% {
                transform: translateY(0);
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            }
            50% {
                transform: translateY(-4px);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
            }
        }

        .wellness-prompt h3 {
            font-family: 'Poppins', Arial, sans-serif;
            font-size: 16px;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .wellness-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .wellness-btn {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid var(--light);
            background-color: transparent;
            color: var(--light);
            border-radius: 8px;
            font-family: 'Poppins', Arial, sans-serif;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .wellness-btn:hover {
            background-color: var(--light);
            color: var(--dark);
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .wellness-btn.primary {
            background-color: var(--light);
            color: var(--dark);
        }

        .wellness-btn.primary:hover {
            background-color: var(--orange);
            color: var(--light);
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        /* Input Area */
        .input-wrapper {
            transition: all 0.3s ease;
        }

        body.theme-original .input-wrapper {
            background-color: var(--light-gray);
            border-top: 1px solid var(--mid-gray);
            padding: 16px 20px;
        }

        body.theme-modern .input-wrapper {
            background-color: var(--light);
            border-top: 1px solid var(--light-gray);
            padding: 16px 20px;
        }

        .input-container {
            border-radius: 24px;
            padding: 14px 18px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s ease;
        }

        body.theme-original .input-container {
            background-color: var(--light);
            border: 1px solid var(--mid-gray);
        }

        body.theme-modern .input-container {
            background-color: white;
            border: 1px solid var(--light-gray);
            box-shadow: 0 1px 3px rgba(20, 20, 19, 0.05);
        }

        .input-container:focus-within {
            border-color: var(--orange);
            box-shadow: 0 0 0 3px rgba(217, 119, 87, 0.15);
            transform: translateY(-1px);
        }

        .attach-btn {
            width: 24px;
            height: 24px;
            border-radius: 8px;
            background-color: transparent;
            color: var(--dark);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.6;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .attach-btn:hover {
            background-color: var(--light-gray);
            opacity: 1;
            transform: scale(1.1) rotate(5deg);
        }

        .attach-btn:active {
            transform: scale(0.95) rotate(0deg);
        }

        .input-field {
            flex: 1;
            border: none;
            background-color: transparent;
            font-family: 'Lora', Georgia, serif;
            font-size: 15px;
            color: var(--dark);
            outline: none;
        }

        .input-field::placeholder {
            color: var(--mid-gray);
        }

        .project-badge {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 5px 12px;
            background-color: var(--light-gray);
            border: 1px solid var(--light-gray);
            border-radius: 10px;
            font-family: 'Poppins', Arial, sans-serif;
            font-size: 12px;
            color: var(--dark);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .project-badge:hover {
            background-color: var(--mid-gray);
            transform: scale(1.05);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
        }

        /* Mode Indicator */
        .mode-indicator {
            font-size: 13px;
            color: var(--mid-gray);
            padding: 6px 0;
            text-align: center;
            font-family: 'Poppins', Arial, sans-serif;
        }

        /* Install prompt */
        .install-prompt {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            border: 1px solid var(--light-gray);
            border-radius: 12px;
            padding: 12px 20px;
            box-shadow: 0 4px 20px rgba(20, 20, 19, 0.15);
            display: none;
            z-index: 1000;
            max-width: 90%;
        }

        .install-prompt.show {
            display: block;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                transform: translateX(-50%) translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
        }

        .install-actions {
            display: flex;
            gap: 8px;
            margin-top: 8px;
        }

        .install-btn {
            padding: 8px 16px;
            border-radius: 8px;
            font-family: 'Poppins', Arial, sans-serif;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .install-btn-primary {
            background-color: var(--orange);
            color: white;
            border: none;
        }

        .install-btn-secondary {
            background-color: transparent;
            color: var(--mid-gray);
            border: 1px solid var(--light-gray);
        }
    </style>
</head>
<body class="theme-original">
    <!-- Theme Toggle -->
    <div class="theme-toggle-container">
        <span class="theme-toggle-label">DESIGN:</span>
        <div class="theme-switch">
            <div class="theme-options">
                <button class="theme-option-btn active" data-theme="original">Original</button>
                <button class="theme-option-btn" data-theme="modern">Modern</button>
                <button class="theme-option-btn" data-theme="mobile">Mobile</button>
                <button class="theme-option-btn" data-theme="mobile-2">Mobile-2</button>
            </div>
        </div>
    </div>

    <!-- Header -->
    <div class="header">
        <div class="header-left">
            <div class="logo">Claude</div>
            <div class="context-badge">
                <div class="context-icon"></div>
                <span>Aware</span>
            </div>
        </div>
        <div class="session-indicator">
            <span id="sessionTime">8m</span>
            <div class="session-bar">
                <div class="session-progress" id="sessionProgress"></div>
            </div>
        </div>
    </div>

    <!-- Mode Selector -->
    <div class="mode-selector">
        <button class="mode-btn active" id="quickBtn">
            <span>âš¡ Quick</span>
        </button>
        <button class="mode-btn" id="deepBtn">
            <span>ðŸŽ¯ Deep Work</span>
        </button>
    </div>

    <!-- Chat Container -->
    <div class="chat-container" id="chatContainer">
        <div class="mode-indicator">Quick mode - Concise responses</div>

        <!-- User Message -->
        <div class="message user">
            <div class="message-bubble">
                How can I improve my daily productivity without burning out?
            </div>
        </div>

        <!-- Breathing Space -->
        <div class="breathing-space">
            <div class="breathing-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>

        <!-- Context Panel -->
        <div class="context-panel">
            <div class="context-row">
                <span class="context-label">Time:</span>
                <span class="context-value" id="currentTime">10:30 AM (Morning)</span>
            </div>
            <div class="context-row">
                <span class="context-label">Mood:</span>
                <span class="mood-badge" id="moodBadge">Focused</span>
            </div>
            <div class="context-row">
                <span class="context-label">Session:</span>
                <span class="context-value">8 min - Fresh</span>
            </div>
        </div>

        <!-- Assistant Message -->
        <div class="message assistant">
            <div class="message-bubble">
                <strong>Quick Answer:</strong> Balance energy, not time. Work in 90-minute cycles with real breaks between.

                <div class="expandable">
                    <div class="expand-trigger" onclick="toggleExpand(this)">
                        <span class="expand-icon">â–¶</span>
                        <span>See detailed approach</span>
                    </div>
                    <div class="expanded-content">
                        <p><strong>Energy Management System:</strong></p>
                        <ul>
                            <li>Track your natural energy peaks (usually 2-3 per day)</li>
                            <li>Schedule demanding work during peaks</li>
                            <li>Use low-energy times for routine tasks</li>
                        </ul>
                        <p style="margin-top: 10px;"><strong>90-Minute Work Cycles:</strong></p>
                        <ul>
                            <li>Deep focus for 90 minutes max</li>
                            <li>15-20 minute break (no screens)</li>
                            <li>Repeat 2-3 times daily</li>
                        </ul>
                        <p style="margin-top: 10px; color: var(--orange); font-size: 13px;"><em>This matches your current morning energy window.</em></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Breathing Space -->
        <div class="breathing-space">
            <div class="breathing-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>

        <!-- User Follow-up -->
        <div class="message user">
            <div class="message-bubble">
                What tools can help me track this?
            </div>
        </div>

        <!-- Assistant Response -->
        <div class="message assistant">
            <div class="message-bubble">
                <strong>3 Simple Tools:</strong>
                <ol style="margin-left: 20px; margin-top: 8px; line-height: 1.6;">
                    <li><strong>Timer:</strong> Any basic timer app for 90-min cycles</li>
                    <li><strong>Energy Journal:</strong> Note your energy levels 3x daily</li>
                    <li><strong>Task Batching:</strong> Group similar tasks together</li>
                </ol>

                <div class="expandable">
                    <div class="expand-trigger" onclick="toggleExpand(this)">
                        <span class="expand-icon">â–¶</span>
                        <span>Specific app recommendations</span>
                    </div>
                    <div class="expanded-content">
                        <p><strong>Recommended Apps:</strong></p>
                        <ul>
                            <li><strong>Focus Booster:</strong> Pomodoro timer with breaks</li>
                            <li><strong>Day One:</strong> Simple energy journaling</li>
                            <li><strong>Sunsama:</strong> Daily planning with energy levels</li>
                        </ul>
                        <p style="margin-top: 10px; font-size: 12px; color: var(--mid-gray);">Start with just one - the timer. Add others when ready.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Wellness Prompt -->
        <div class="wellness-prompt" id="wellnessPrompt" style="display: none;">
            <h3>ðŸ’š Gentle Reminder</h3>
            <p style="opacity: 0.9; margin-top: 4px;">You've been exploring for 12 minutes. Your focus is sharp right now.</p>
            <div class="wellness-actions">
                <button class="wellness-btn" onclick="pauseSession()">Take a Break</button>
                <button class="wellness-btn primary" onclick="continueSession()">Continue</button>
            </div>
        </div>
    </div>

    <!-- Input Area -->
    <div class="input-wrapper">
        <div class="input-container">
            <button class="attach-btn">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"/>
                </svg>
            </button>
            <input type="text" class="input-field" placeholder="How can Claude help you today?" id="inputField">
            <div class="project-badge">
                <svg width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                </svg>
                <span>Use project</span>
            </div>
        </div>
    </div>

    <!-- Install Prompt -->
    <div class="install-prompt" id="installPrompt">
        <p style="font-family: 'Poppins', Arial, sans-serif; font-size: 13px; margin-bottom: 4px;"><strong>Install Claude Pulse</strong></p>
        <p style="font-size: 12px; color: var(--mid-gray);">Add to your home screen for easy access</p>
        <div class="install-actions">
            <button class="install-btn install-btn-primary" onclick="installApp()">Install</button>
            <button class="install-btn install-btn-secondary" onclick="dismissInstall()">Not now</button>
        </div>
    </div>

    <script>
        // Figma SVG Icons
        const ICONS = {
            menu: `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 12H21M3 6H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>`,
            plus: `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>`,
            attachment: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>`,
            voice: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3z" stroke="currentColor" stroke-width="2"/>
                <path d="M19 10v2a7 7 0 01-14 0v-2M12 19v4M8 23h8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>`,
            chevronDown: `<svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>`,
            claudeIcon: `<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.92 13.3L7.86 11.1L7.92 10.9L7.86 10.8H7.66L7 10.76L4.76 10.7L2.8 10.6L0.9 10.5L0.42 10.4L0 9.8L0.04 9.5L0.44 9.24L1.02 9.28L2.28 9.38L4.18 9.5L5.56 9.58L7.6 9.82H7.92L7.96 9.68L7.86 9.6L7.78 9.52L5.8 8.2L3.68 6.8L2.56 5.98L1.96 5.58L1.66 5.18L1.54 4.34L2.08 3.74L2.82 3.8L3 3.84L3.74 4.42L5.34 5.64L7.4 7.2L7.7 7.44L7.82 7.36L7.84 7.3L7.7 7.08L6.6 5L5.4 2.92L4.86 2.06L4.72 1.54C4.66 1.34 4.64 1.14 4.64 0.94L5.24 0.1L5.6 0L6.44 0.12L6.76 0.4L7.28 1.6L8.1 3.46L9.4 5.98L9.8 6.74L10 7.42L10.06 7.62H10.2V7.52L10.3 6.08L10.5 4.34L10.7 2.1L10.76 1.46L11.08 0.7L11.68 0.3L12.2 0.52L12.6 1.1L12.54 1.46L12.32 3L11.8 5.42L11.5 7.06H11.68L11.88 6.84L12.7 5.76L14.08 4.04L14.68 3.34L15.4 2.6L15.86 2.24H16.72L17.34 3.18L17.06 4.16L16.18 5.28L15.44 6.22L14.38 7.64L13.74 8.78L13.8 8.86H13.94L16.34 8.34L17.62 8.12L19.14 7.86L19.84 8.18L19.92 8.5L19.64 9.18L18 9.58L16.08 9.98L13.22 10.64L13.18 10.66L13.22 10.72L14.5 10.84L15.06 10.88H16.42L18.94 11.08L19.6 11.48L19.98 12.02L19.92 12.42L18.9 12.94L17.54 12.62L14.34 11.86L13.26 11.6H13.1V11.68L14.02 12.58L15.68 14.08L17.8 16.02L17.9 16.5L17.64 16.9L17.36 16.86L15.52 15.46L14.8 14.86L13.2 13.5H13.1V13.64L13.46 14.18L15.42 17.12L15.52 18.02L15.38 18.3L14.86 18.5L14.32 18.38L13.16 16.78L11.96 14.98L11.02 13.34L10.92 13.42L10.34 19.46L10.08 19.76L9.48 20L8.98 19.6L8.7 19L8.98 17.76L9.3 16.16L9.56 14.88L9.8 13.3L9.94 12.78V12.74H9.8L8.6 14.4L6.8 16.86L5.36 18.38L5.02 18.52L4.42 18.22L4.48 17.66L4.8 17.2L6.8 14.64L8 13.06L8.8 12.14L8.78 12.04H8.72L3.44 15.48L2.5 15.6L2.1 15.2L2.14 14.6L2.34 14.4L3.94 13.3H3.92Z" fill="currentColor"/>
            </svg>`
        };

        // Theme Toggle
        const themeButtons = document.querySelectorAll('.theme-option-btn');
        const body = document.body;

        // Load saved theme
        const savedTheme = localStorage.getItem('claudeDesignTheme') || 'original';
        body.classList.remove('theme-original', 'theme-modern', 'theme-mobile', 'theme-mobile-2');
        body.classList.add(`theme-${savedTheme}`);

        // Update button states
        themeButtons.forEach(btn => {
            if (btn.dataset.theme === savedTheme) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });

        // Update header, messages, and input for Mobile-2 theme
        function updateHeaderForTheme(theme) {
            const header = document.querySelector('.header');
            const inputContainer = document.querySelector('.input-container');

            if (theme === 'mobile-2') {
                // Create Mobile-2 header structure
                header.innerHTML = `
                    <button class="header-icon-btn" onclick="toggleMenu()">
                        ${ICONS.menu}
                    </button>
                    <button class="model-dropdown" onclick="toggleModelPicker()">
                        ${ICONS.claudeIcon}
                        <span>Sonnet 4.5</span>
                        ${ICONS.chevronDown}
                    </button>
                    <button class="header-icon-btn" onclick="newChat()">
                        ${ICONS.plus}
                    </button>
                `;

                // Update input container with Figma icons
                inputContainer.innerHTML = `
                    <button class="attach-btn">${ICONS.attachment}</button>
                    <input type="text" class="input-field" placeholder="How can Claude help you today?" id="inputField">
                    <button class="attach-btn">${ICONS.voice}</button>
                `;

                // Add action buttons to assistant messages
                addMessageActions();
            } else {
                // Restore original header structure
                header.innerHTML = `
                    <div class="header-left">
                        <div class="logo">Claude</div>
                        <div class="context-badge">
                            <div class="context-icon"></div>
                            <span>Aware</span>
                        </div>
                    </div>
                    <div class="session-indicator">
                        <div class="session-bar"></div>
                    </div>
                `;

                // Restore original input container
                inputContainer.innerHTML = `
                    <button class="attach-btn">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"/>
                        </svg>
                    </button>
                    <input type="text" class="input-field" placeholder="How can Claude help you today?" id="inputField">
                    <div class="project-badge">
                        <svg width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                        </svg>
                        <span>Use project</span>
                    </div>
                `;

                // Remove action buttons from messages
                removeMessageActions();
            }
        }

        // Add action buttons to assistant messages for Mobile-2
        function addMessageActions() {
            const copyIcon = `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="9" y="9" width="13" height="13" rx="2" ry="2" stroke-width="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1" stroke-width="2"/></svg>`;
            const retryIcon = `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M1 4v6h6M23 20v-6h-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M20.49 9A9 9 0 005.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 013.51 15" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`;

            document.querySelectorAll('.message.assistant .message-bubble').forEach(bubble => {
                // Check if actions already exist
                if (!bubble.querySelector('.message-actions')) {
                    const actionsDiv = document.createElement('div');
                    actionsDiv.className = 'message-actions';
                    actionsDiv.innerHTML = `
                        <button class="action-btn" onclick="copyMessage(this)">
                            ${copyIcon}
                            <span>Copy</span>
                        </button>
                        <button class="action-btn" onclick="retryMessage(this)">
                            ${retryIcon}
                            <span>Retry</span>
                        </button>
                    `;
                    bubble.appendChild(actionsDiv);
                }
            });
        }

        // Remove action buttons from messages
        function removeMessageActions() {
            document.querySelectorAll('.message-actions').forEach(actions => {
                actions.remove();
            });
        }

        // Message action handlers
        function copyMessage(btn) {
            const bubble = btn.closest('.message-bubble');
            const text = bubble.textContent.replace(/CopyRetry/, '').trim();
            navigator.clipboard.writeText(text);
            btn.innerHTML = btn.innerHTML.replace('Copy', 'Copied');
            setTimeout(() => {
                btn.innerHTML = btn.innerHTML.replace('Copied', 'Copy');
            }, 2000);
        }

        function retryMessage(btn) {
            console.log('Retrying message...');
        }

        // Handle theme switching
        themeButtons.forEach(button => {
            button.addEventListener('click', () => {
                const theme = button.dataset.theme;

                // Remove all theme classes
                body.classList.remove('theme-original', 'theme-modern', 'theme-mobile', 'theme-mobile-2');
                body.classList.add(`theme-${theme}`);

                // Update button states
                themeButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');

                // Save preference
                localStorage.setItem('claudeDesignTheme', theme);

                // Update header for Mobile-2
                updateHeaderForTheme(theme);
            });
        });

        // Initialize header on load
        updateHeaderForTheme(savedTheme);

        // Placeholder functions for Mobile-2 interactions
        function toggleMenu() {
            console.log('Menu toggled');
        }

        function toggleModelPicker() {
            console.log('Model picker toggled');
        }

        function newChat() {
            console.log('New chat started');
        }

        // Time-based context
        function updateTimeContext() {
            const now = new Date();
            const hours = now.getHours();
            const minutes = now.getMinutes();
            const timeString = `${hours % 12 || 12}:${minutes.toString().padStart(2, '0')} ${hours >= 12 ? 'PM' : 'AM'}`;

            let period = 'Morning';
            let mood = 'Focused';

            if (hours >= 5 && hours < 12) {
                period = 'Morning';
                mood = 'Energized';
            } else if (hours >= 12 && hours < 17) {
                period = 'Afternoon';
                mood = 'Steady';
            } else if (hours >= 17 && hours < 21) {
                period = 'Evening';
                mood = 'Reflective';
            } else {
                period = 'Night';
                mood = 'Calm';
            }

            document.getElementById('currentTime').textContent = `${timeString} (${period})`;
            document.getElementById('moodBadge').textContent = mood;
        }

        // Mode switching
        const quickBtn = document.getElementById('quickBtn');
        const deepBtn = document.getElementById('deepBtn');
        const modeIndicator = document.querySelector('.mode-indicator');

        quickBtn.addEventListener('click', () => {
            quickBtn.classList.add('active');
            deepBtn.classList.remove('active');
            modeIndicator.textContent = 'Quick mode - Concise responses';
        });

        deepBtn.addEventListener('click', () => {
            deepBtn.classList.add('active');
            quickBtn.classList.remove('active');
            modeIndicator.textContent = 'Deep Work mode - Detailed exploration';
        });

        // Expandable sections
        function toggleExpand(trigger) {
            const icon = trigger.querySelector('.expand-icon');
            const content = trigger.nextElementSibling;
            icon.classList.toggle('expanded');
            content.classList.toggle('show');
        }

        // Session progress
        let sessionMinutes = 8;
        setInterval(() => {
            sessionMinutes++;
            const progress = Math.min((sessionMinutes / 30) * 100, 100);
            document.getElementById('sessionProgress').style.width = progress + '%';
            document.getElementById('sessionTime').textContent = sessionMinutes + 'm';

            if (sessionMinutes === 12) {
                const wellnessPrompt = document.getElementById('wellnessPrompt');
                wellnessPrompt.style.display = 'block';

                // Smooth scroll to bring it into view
                setTimeout(() => {
                    wellnessPrompt.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                }, 100);
            }
        }, 60000);

        // Wellness actions
        function continueSession() {
            document.getElementById('wellnessPrompt').style.display = 'none';
        }

        function pauseSession() {
            document.getElementById('wellnessPrompt').style.display = 'none';
        }

        // Send message
        function sendMessage() {
            const input = document.getElementById('inputField');
            if (input.value.trim()) {
                const chatContainer = document.getElementById('chatContainer');

                const messageDiv = document.createElement('div');
                messageDiv.className = 'message user';
                messageDiv.innerHTML = `<div class="message-bubble">${input.value}</div>`;
                chatContainer.appendChild(messageDiv);

                const breathingSpace = document.createElement('div');
                breathingSpace.className = 'breathing-space';
                breathingSpace.innerHTML = `<div class="breathing-dots"><span></span><span></span><span></span></div>`;
                chatContainer.appendChild(breathingSpace);

                chatContainer.scrollTop = chatContainer.scrollHeight;
                input.value = '';

                setTimeout(() => {
                    const responseDiv = document.createElement('div');
                    responseDiv.className = 'message assistant';
                    responseDiv.innerHTML = `<div class="message-bubble">This is a prototype demonstrating health-conscious AI interaction. Try the theme toggle above to see both design versions!</div>`;
                    chatContainer.appendChild(responseDiv);
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }, 1200);
            }
        }

        document.getElementById('inputField').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        // PWA Install
        let deferredPrompt;

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            setTimeout(() => {
                document.getElementById('installPrompt').classList.add('show');
            }, 5000);
        });

        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then(() => {
                    deferredPrompt = null;
                    dismissInstall();
                });
            }
        }

        function dismissInstall() {
            document.getElementById('installPrompt').classList.remove('show');
        }

        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js').catch(() => {});
        }

        // Initialize
        updateTimeContext();
        setInterval(updateTimeContext, 60000);

        // Demo: Show wellness prompt after 3 seconds
        setTimeout(() => {
            document.getElementById('wellnessPrompt').style.display = 'block';
        }, 3000);
    </script>
</body>
</html>
